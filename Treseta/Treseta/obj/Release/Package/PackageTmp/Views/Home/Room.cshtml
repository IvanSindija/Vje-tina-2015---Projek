@ViewData["imeSobe"]
<div>
    <canvas id="myCanvas" width="1000" height="600" style="border:1px solid #000000;"></canvas>
    <h3>@ViewData["korisnickoIme"]</h3>
</div>
<div class="container">
    <input type="text" id="message" />
    <input type="button" id="sendmessage" value="Send" />
    <input type="button" id="kreni" value="join" />
</div>
<div id="chatBox" style="overflow-y: scroll; height:400px; border:1px solid #000000;">
      <ul id="discussion"></ul>
</div>
@section scripts {

<!--skripte za chat i multiplayer tu je zasad mozda prebacim u scripts-->
<!--Script references. -->
<!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
<!--Reference the SignalR library. -->
<script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
<!--Reference the autogenerated SignalR hub script. -->
<script src="~/signalr/hubs"></script>
<!--SignalR script to update the chat page and send messages.-->
<script>
    $(function () {
        // Reference the auto-generated proxy for the hub.
        var chat = $.connection.multiplayerHub;

        registerClientMethods(chat);

        // Start Hub
        $.connection.hub.start().done(function () {
            registerEvents(chat);
        });
    });

    function registerEvents(chat) {

        $('#kreni').click(function(){
            $('#discussion').append('<li><strong>' + htmlEncode("bijase klikunut")+ '</strong>: ' +'</li>');
            chat.server.Connect(@ViewData["korisnickoIme"] , @ViewData["imeSobe"]);
        });

        $('#sendmessage').click(function () {
            $('#discussion').append('<li><strong>' + htmlEncode("bijase klikunut")+ '</strong>: ' +'</li>');
            // Call the Send method on the hub.
            chat.server.SendMessage(@ViewData["korisnickoIme"],@ViewData["imeSobe"], $('#message').val());
            // Clear text box and reset focus for next comment.
            $('#message').val('').focus();
        });

    }

    function registerClientMethods(chat) {

        chat.client.onNewUserConnected = function (id, name) {

            $('#discussion').append('<li><strong>' + htmlEncode(name)
              + '</strong>: ' + htmlEncode(" se pridruzio") + '</li>');
        }

        chat.client.sendMessageToClient = function (korisnik , message){
            $('#discussion').append('<li><strong>' + htmlEncode(korisnik)
             + '</strong>: ' + htmlEncode(message) + '</li>');
        }

        chat.client.onUserDisconnected = function (id , name){
            $('#discussion').append('<li><strong>' + htmlEncode(name)
             + '</strong>: ' + htmlEncode(" je otisao") + '</li>');
        }

    }

    // This optional function html-encodes messages for display in the page.
    //pozeljno zadrzati
    function htmlEncode(value) {
        var encodedValue = $('<div />').text(value).html();
        return encodedValue;
    }
</script>

    }